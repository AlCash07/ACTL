<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Writing documentation &#8212; ACTL  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css?v=4468db6d" />
    <script src="../_static/documentation_options.js?v=7f41d439"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Writing code" href="Writing%20code.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          ACTL</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../actl/meta/constant.html">constant</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../actl/functional.html">functional</a></li>
<li class="toctree-l1"><a class="reference internal" href="../actl/meta.html">meta</a></li>
<li class="toctree-l1"><a class="reference internal" href="../actl/memory.html">memory</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../actl/string.html">string</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Running%20tests.html">Running tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="Writing%20code.html">Writing code</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Writing documentation</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Writing documentation</a><ul>
<li><a class="reference internal" href="#doxygen">Doxygen</a></li>
<li><a class="reference internal" href="#sphinx">Sphinx</a></li>
<li><a class="reference internal" href="#publishing-documentation">Publishing documentation</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="Writing%20code.html" title="Previous Chapter: Writing code"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Writing code</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">Writing documentation</a><ul>
<li><a class="reference internal" href="#doxygen">Doxygen</a></li>
<li><a class="reference internal" href="#sphinx">Sphinx</a></li>
<li><a class="reference internal" href="#publishing-documentation">Publishing documentation</a></li>
</ul>
</li>
</ul>

  <li>
    <a href="Writing%20code.html" title="Previous Chapter: Writing code"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Writing code</span>
    </a>
  </li>
<form action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      
  <section id="writing-documentation">
<h1>Writing documentation<a class="headerlink" href="#writing-documentation" title="Link to this heading">¶</a></h1>
<p>One of the biggest problems of C++ is a lack of good and easy to use tools for writing documentation.
Here we describe the documentation tools chosen as the best fit for ACTL at this time.
They are based on the article <a class="reference external" href="https://devblogs.microsoft.com/cppblog/clear-functional-c-documentation-with-sphinx-breathe-doxygen-cmake/">Clear, Functional C++ Documentation with Sphinx + Breathe + Doxygen + CMake</a>
which you can read for more details.
The main difference is that shell scripts are used insted of CMake commands for simplicity,
but this may be revisited to make scripts portable.</p>
<p>All the requirements can be installed using the
<a class="reference external" href="https://github.com/AlCash07/ACTL/blob/master/scripts/doc/setup.sh">scripts/doc/setup.sh</a> script.</p>
<section id="doxygen">
<h2>Doxygen<a class="headerlink" href="#doxygen" title="Link to this heading">¶</a></h2>
<p>The most complicated task, the C++ code parsing, is done by Doxygen.
Documentation comments that follow the <a class="reference external" href="https://www.doxygen.nl/manual/docblocks.html">Doxygen manual</a>
are automatically extracted at this step,
but they don’t automatically appear in any web pages.
The following style of comments is preferred in ACTL:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">/// Description.</span>
</pre></div>
</div>
<p>Only comments that explain what classes and functions do should be written in Doxygen.
For other things such as examples and design rationale, and also how to use the Doxygen output, see <a class="reference internal" href="#sphinx">Sphinx</a> section.</p>
<p>Documentatition comments are actually strongly discouraged.
The goal is to have self-documenting code whenever possible:</p>
<ul class="simple">
<li><p>Use descriptive names for types, functions, parameters etc.</p></li>
<li><p>Introduce more high level types.
For example, if a class <code class="code highlight cpp docutils literal highlight-cpp"><span class="n">Line</span></code> is used instead of two points, there’s no need
for a comment explaining that these two points represent a line.</p></li>
<li><p>Use special annotations to improve clarity, such as <code class="code highlight cpp docutils literal highlight-cpp"><span class="n">out</span></code> and <code class="code highlight cpp docutils literal highlight-cpp"><span class="n">inout</span></code> wrappers.</p></li>
</ul>
<p>Treat every comment as a failure to express yourself in code.
Write a comment only when it provides useful information that can’t be written in the code itself.</p>
<p>Doxygen can be run using the <a class="reference external" href="https://github.com/AlCash07/ACTL/blob/master/scripts/doc/doxygen.sh">scripts/doc/doxygen.sh</a> script
or the <code class="docutils literal notranslate"><span class="pre">run</span> <span class="pre">doxygen</span></code> VS Code task.</p>
<p>The Doxygen configuration file can be found <a class="reference external" href="https://github.com/AlCash07/ACTL/blob/master/doc/Doxyfile.in">here</a>.
The options of interest are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">GENERATE_XML</span></code> is set to <code class="docutils literal notranslate"><span class="pre">YES</span></code>, because xml output is used for the following steps.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GENERATE_HTML</span></code> is set to <code class="docutils literal notranslate"><span class="pre">NO</span></code>, but can be set to YES to check the output locally in the <em>build/doc/doxygen/html</em> folder.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EXTRACT_ALL</span></code> is set to <code class="docutils literal notranslate"><span class="pre">YES</span></code>, because most of the library content is put into free functions instead of classes by design.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EXCLUDE_SYMBOLS</span></code> is set to <code class="docutils literal notranslate"><span class="pre">detail</span></code>, as this is the canonical namespace for implementation details.
Don’t put public code such as base classes with public interface into <code class="code highlight cpp docutils literal highlight-cpp"><span class="k">namespace</span><span class="w"> </span><span class="nn">detail</span></code>, because they won’t be documented.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">INLINE_INHERITED_MEMB</span></code> is set to <code class="docutils literal notranslate"><span class="pre">YES</span></code> to make it easier to see the full class interface.
Utilities such as iterators and ranges rely on base classes to define the full interface without writing repetitive boilerplate code.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PREDEFINED</span></code> contains macros that affect the structure of the code.
They would be parsed incorrectly otherwise.</p></li>
</ul>
</section>
<section id="sphinx">
<h2>Sphinx<a class="headerlink" href="#sphinx" title="Link to this heading">¶</a></h2>
<p><a class="reference external" href="https://www.sphinx-doc.org/en/master/">Sphinx generator</a> is used to generate the final documentation web pages.
The sources in rst format are located in the <a class="reference external" href="https://github.com/AlCash07/ACTL/tree/master/doc">doc</a> folder.
Existing sources can be used as a reference, other useful links for writing them are:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docutils.sourceforge.io/docs/user/rst/quickref.html">reStructuredText quick reference</a></p></li>
<li><p><a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/restructuredtext/directives.html">Sphinx directives</a></p></li>
<li><p><a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/restructuredtext/domains.html#cpp-domain">Sphinx C++ support</a></p></li>
<li><p><a class="reference external" href="https://breathe.readthedocs.io/en/latest/directives.html">Breathe directives</a>.
Breathe is an extension for Sphinx that allows to use Doxygen xml output.</p></li>
</ul>
<p>Sphinx can be run using the <a class="reference external" href="https://github.com/AlCash07/ACTL/blob/master/scripts/doc/sphinx.sh">scripts/doc/sphinx.sh</a> script
or the <code class="docutils literal notranslate"><span class="pre">generate</span> <span class="pre">documentation</span></code> VS Code task (together with Doxygen),
and its output can be examined by opening <em>build/doc/sphinx/index.html</em></p>
</section>
<section id="publishing-documentation">
<h2>Publishing documentation<a class="headerlink" href="#publishing-documentation" title="Link to this heading">¶</a></h2>
<p>Currently, the documentation is published manually only by the project maintainers using the
<a class="reference external" href="https://github.com/AlCash07/ACTL/blob/master/scripts/doc/publish.sh">scripts/doc/publish.sh</a> script
or the <code class="docutils literal notranslate"><span class="pre">publish</span> <span class="pre">documentation</span></code> VS Code task (together with documentation generation).</p>
<p>Generated documentation is committed to a special <a class="reference external" href="https://github.com/AlCash07/ACTL/tree/doc">doc branch</a>
and then automatically published to <a class="reference external" href="https://pages.github.com/">GitHub pages</a> at <a class="reference external" href="https://alcash07.github.io/ACTL/">https://alcash07.github.io/ACTL/</a>.</p>
<p>Note that <em>.nojekyll</em> file had to be created in that branch to support the <em>_static</em> folder used by Sphinx.</p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2022, Oleksandr Bacherikov.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 7.3.7.<br/>
    </p>
  </div>
</footer>
  </body>
</html>