<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>out/inout parameters &#8212; ACTL  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css?v=4468db6d" />
    <script src="../../_static/documentation_options.js?v=7f41d439"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="overloaded" href="overloaded.html" />
    <link rel="prev" title="noexcept specifier" href="noexcept.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html">
          ACTL</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../meta/constant.html">constant</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../functional.html">functional</a></li>
<li class="toctree-l1"><a class="reference internal" href="../meta.html">meta</a></li>
<li class="toctree-l1"><a class="reference internal" href="../memory.html">memory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../platform.html">platform</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../string.html">string</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/Running%20tests.html">Running tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/Writing%20code.html">Writing code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/Writing%20documentation.html">Writing documentation</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">out/inout parameters</a><ul>
<li><a class="reference internal" href="#difference-between-out-and-inout-parameters">Difference between out and inout parameters</a></li>
<li><a class="reference internal" href="#reference">Reference</a><ul>
<li><a class="reference internal" href="#_CPPv4I0EN2ac3outE"><code class="docutils literal notranslate"><span class="pre">out</span></code></a><ul>
<li><a class="reference internal" href="#_CPPv4I0EN2ac3out3outERR3Arg"><code class="docutils literal notranslate"><span class="pre">out::out()</span></code></a></li>
<li><a class="reference internal" href="#_CPPv4I0EN2ac3out3outERR3outI1UE"><code class="docutils literal notranslate"><span class="pre">out::out()</span></code></a></li>
<li><a class="reference internal" href="#_CPPv4NK2ac3outmlEv"><code class="docutils literal notranslate"><span class="pre">out::operator*()</span></code></a></li>
<li><a class="reference internal" href="#_CPPv4NK2ac3outcv1TEv"><code class="docutils literal notranslate"><span class="pre">out::operator</span> <span class="pre">T()</span></code></a></li>
<li><a class="reference internal" href="#_CPPv4N2ac3outptEv"><code class="docutils literal notranslate"><span class="pre">out::operator-&gt;()</span></code></a></li>
<li><a class="reference internal" href="#_CPPv4I0EN2ac3outaSER3outRR3Src"><code class="docutils literal notranslate"><span class="pre">out::operator=()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#_CPPv4I0EN2ac5inoutE"><code class="docutils literal notranslate"><span class="pre">inout</span></code></a></li>
<li><a class="reference internal" href="#detection-traits">Detection traits</a><ul>
<li><a class="reference internal" href="#_CPPv4I0EN2ac8is_out_vE"><code class="docutils literal notranslate"><span class="pre">is_out_v</span></code></a></li>
<li><a class="reference internal" href="#_CPPv4I0EN2ac10is_inout_vE"><code class="docutils literal notranslate"><span class="pre">is_inout_v</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#design">Design</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="noexcept.html" title="Previous Chapter: noexcept specifier"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; noexcept specifier</span>
    </a>
  </li>
  <li>
    <a href="overloaded.html" title="Next Chapter: overloaded"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">overloaded &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">out/inout parameters</a><ul>
<li><a class="reference internal" href="#difference-between-out-and-inout-parameters">Difference between out and inout parameters</a></li>
<li><a class="reference internal" href="#reference">Reference</a><ul>
<li><a class="reference internal" href="#_CPPv4I0EN2ac3outE"><code class="docutils literal notranslate"><span class="pre">out</span></code></a><ul>
<li><a class="reference internal" href="#_CPPv4I0EN2ac3out3outERR3Arg"><code class="docutils literal notranslate"><span class="pre">out::out()</span></code></a></li>
<li><a class="reference internal" href="#_CPPv4I0EN2ac3out3outERR3outI1UE"><code class="docutils literal notranslate"><span class="pre">out::out()</span></code></a></li>
<li><a class="reference internal" href="#_CPPv4NK2ac3outmlEv"><code class="docutils literal notranslate"><span class="pre">out::operator*()</span></code></a></li>
<li><a class="reference internal" href="#_CPPv4NK2ac3outcv1TEv"><code class="docutils literal notranslate"><span class="pre">out::operator</span> <span class="pre">T()</span></code></a></li>
<li><a class="reference internal" href="#_CPPv4N2ac3outptEv"><code class="docutils literal notranslate"><span class="pre">out::operator-&gt;()</span></code></a></li>
<li><a class="reference internal" href="#_CPPv4I0EN2ac3outaSER3outRR3Src"><code class="docutils literal notranslate"><span class="pre">out::operator=()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#_CPPv4I0EN2ac5inoutE"><code class="docutils literal notranslate"><span class="pre">inout</span></code></a></li>
<li><a class="reference internal" href="#detection-traits">Detection traits</a><ul>
<li><a class="reference internal" href="#_CPPv4I0EN2ac8is_out_vE"><code class="docutils literal notranslate"><span class="pre">is_out_v</span></code></a></li>
<li><a class="reference internal" href="#_CPPv4I0EN2ac10is_inout_vE"><code class="docutils literal notranslate"><span class="pre">is_inout_v</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#design">Design</a></li>
</ul>
</li>
</ul>

  <li>
    <a href="noexcept.html" title="Previous Chapter: noexcept specifier"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; noexcept specifier</span>
    </a>
  </li>
  <li>
    <a href="overloaded.html" title="Next Chapter: overloaded"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">overloaded &raquo;</span>
    </a>
  </li>
<form action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      
  <section id="out-inout-parameters">
<h1>out/inout parameters<a class="headerlink" href="#out-inout-parameters" title="Link to this heading">¶</a></h1>
<p>One of the most important aspects of understanding the code behavior
is to clearly see which values can change and at which point.</p>
<p>Modern C++ strongly encourages returning by value over output parameters.
Structured binding and types like <code class="code highlight cpp docutils literal highlight-cpp"><span class="n">std</span><span class="o">::</span><span class="n">optional</span></code> are the signs of that.
However, output parameters are still useful in some cases,
and C++ provides no built-in mechanism to distinguish them.</p>
<p>For example, can you imagine a C++ newcomer to guess which parameter
represents the output range of this algorithm?</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">ranges</span><span class="o">::</span><span class="n">transform</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">z</span><span class="p">);</span>
</pre></div>
</div>
<p>We aim to make such code more self-documenting with the help of simple wrappers:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">ac</span><span class="o">::</span><span class="n">ranges</span><span class="o">::</span><span class="n">transform</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">ac</span><span class="o">::</span><span class="n">out</span><span class="p">{</span><span class="n">y</span><span class="p">},</span><span class="w"> </span><span class="n">z</span><span class="p">);</span>
</pre></div>
</div>
<section id="difference-between-out-and-inout-parameters">
<h2>Difference between out and inout parameters<a class="headerlink" href="#difference-between-out-and-inout-parameters" title="Link to this heading">¶</a></h2>
<p><a class="reference internal" href="#_CPPv4I0EN2ac5inoutE" title="ac::inout"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ac::inout</span></code></a> shouldn’t be used just because
we read something from the parameter.
It should be used only if we read the referenced data.</p>
<p>For example, <code class="code highlight cpp docutils literal highlight-cpp"><span class="n">std</span><span class="o">::</span><span class="n">span</span></code> references a contiguous block of memory.
But in order to access this memory, we clearly need to read
<code class="code highlight cpp docutils literal highlight-cpp"><span class="p">.</span><span class="n">data</span><span class="p">()</span></code> and <code class="code highlight cpp docutils literal highlight-cpp"><span class="p">.</span><span class="n">size</span><span class="p">()</span></code> from the span.
It’s recommended to still use <code class="code highlight cpp docutils literal highlight-cpp"><span class="n">ac</span><span class="o">::</span><span class="n">out</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">span</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span></code>
if we don’t read to referenced memory itself.</p>
</section>
<section id="reference">
<h2>Reference<a class="headerlink" href="#reference" title="Link to this heading">¶</a></h2>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4I0EN2ac3outE">
<span id="_CPPv3I0EN2ac3outE"></span><span id="_CPPv2I0EN2ac3outE"></span><span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">T</span></span></span><span class="p"><span class="pre">&gt;</span></span><br /><span class="target" id="classac_1_1out"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">out</span></span></span><a class="headerlink" href="#_CPPv4I0EN2ac3outE" title="Link to this definition">¶</a><br /></dt>
<dd><p>Thin wrapper over a reference-like or a pointer-like type to specify an output-only function parameter.</p>
<p>It helps to simplify reasoning about the code behavior by making potential variable modifications clearly visible at both the function definition and all the call sites.</p>
<p>For example, in operations similar to copy it’s not immediately clear which of the arguments we’re copying to: <div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">copy_range</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">);</span>
</pre></div>
</div>
 Using <a class="reference internal" href="#classac_1_1out"><span class="std std-ref">ac::out</span></a> wrapper, we can make it obvious without any extra documentation: <div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">Range</span><span class="o">&gt;</span>
<span class="kt">void</span><span class="w"> </span><span class="n">copy_range</span><span class="p">(</span><span class="n">out</span><span class="o">&lt;</span><span class="n">Range</span><span class="o">&amp;&gt;</span><span class="w"> </span><span class="n">dst</span><span class="p">,</span><span class="w"> </span><span class="n">Range</span><span class="w"> </span><span class="k">const</span><span class="o">&amp;</span><span class="w"> </span><span class="n">src</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>

<span class="n">copy_range</span><span class="p">(</span><span class="n">out</span><span class="p">{</span><span class="n">x</span><span class="p">},</span><span class="w"> </span><span class="n">y</span><span class="p">);</span>
</pre></div>
</div>
</p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4I0EN2ac3out3outERR3Arg">
<span id="_CPPv3I0EN2ac3out3outERR3Arg"></span><span id="_CPPv2I0EN2ac3out3outERR3Arg"></span><span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Arg</span></span></span><span class="p"><span class="pre">&gt;</span></span><br /><span class="target" id="classac_1_1out_1aee07c3c1c9ae9a03d883e4f6c460f4d2"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">explicit</span></span><span class="w"> </span><span class="k"><span class="pre">constexpr</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">out</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4I0EN2ac3out3outERR3Arg" title="ac::out::out::Arg"><span class="n"><span class="pre">Arg</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">arg</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4I0EN2ac3out3outERR3Arg" title="Link to this definition">¶</a><br /></dt>
<dd><p>Constructor from an arbitrary type convertible to the wrapped type. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4I0EN2ac3out3outERR3outI1UE">
<span id="_CPPv3I0EN2ac3out3outERR3outI1UE"></span><span id="_CPPv2I0EN2ac3out3outERR3outI1UE"></span><span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">U</span></span></span><span class="p"><span class="pre">&gt;</span></span><br /><span class="target" id="classac_1_1out_1af5bea7292cb8789d8d470eb054bb785a"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">constexpr</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">out</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4I0EN2ac3out3outERR3outI1UE" title="ac::out::out"><span class="n"><span class="pre">out</span></span></a><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4I0EN2ac3out3outERR3outI1UE" title="ac::out::out::U"><span class="n"><span class="pre">U</span></span></a><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">src</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4I0EN2ac3out3outERR3outI1UE" title="Link to this definition">¶</a><br /></dt>
<dd><p>Function arguments in C++ can undergo an implicit conversion to match the parameter types. For example, <code class="docutils literal notranslate"><span class="pre">std::vector&lt;int&gt;&amp;</span></code> to <code class="docutils literal notranslate"><span class="pre">std::span&lt;int&gt;</span></code>.</p>
<p>This implicit constructor allows to preserve this behavior without the extra manual conversion when <a class="reference internal" href="#classac_1_1out"><span class="std std-ref">ac::out</span></a> wrapper is used if the wrapped types are implicitly convertible. For example, <code class="docutils literal notranslate"><a class="reference internal" href="#classac_1_1out"><span class="std std-ref"><span class="pre">ac::out</span></span></a><span class="pre">&lt;std::vector&lt;int&gt;&amp;&gt;</span></code> argument can be passed where <code class="docutils literal notranslate"><a class="reference internal" href="#classac_1_1out"><span class="std std-ref"><span class="pre">ac::out</span></span></a><span class="pre">&lt;std::span&lt;int&gt;&gt;</span></code> parameter is expected. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK2ac3outmlEv">
<span id="_CPPv3NK2ac3outmlEv"></span><span id="_CPPv2NK2ac3outmlEv"></span><span id="ac::out::mul-operatorC"></span><span class="target" id="classac_1_1out_1a20df7ba7cc49f1d63c98b69d57bbbf91"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4I0EN2ac3outE" title="ac::out::T"><span class="n"><span class="pre">T</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="k"><span class="pre">operator</span></span><span class="o"><span class="pre">*</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">noexcept</span></span><a class="headerlink" href="#_CPPv4NK2ac3outmlEv" title="Link to this definition">¶</a><br /></dt>
<dd><p>Accesses the wrapped value. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>operator* is used for consistency with <code class="docutils literal notranslate"><span class="pre">std::optional</span></code>. Simple operator like this is even more appropriate here than in <code class="docutils literal notranslate"><span class="pre">std::optional</span></code>, because <code class="docutils literal notranslate"><span class="pre">std::optional</span></code> might not contain a value, but here it’s always available. </p>
</div>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK2ac3outcv1TEv">
<span id="_CPPv3NK2ac3outcv1TEv"></span><span id="_CPPv2NK2ac3outcv1TEv"></span><span id="ac::out::castto-T-operatorCCE"></span><span class="target" id="classac_1_1out_1aeb6582a963982bb78b50411cd8461309"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">constexpr</span></span><span class="w"> </span><span class="sig-name descname"><span class="k"><span class="pre">operator</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4I0EN2ac3outE" title="ac::out::T"><span class="n"><span class="pre">T</span></span></a></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">noexcept</span></span><a class="headerlink" href="#_CPPv4NK2ac3outcv1TEv" title="Link to this definition">¶</a><br /></dt>
<dd><p>Implicit conversion to the wrapped type. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N2ac3outptEv">
<span id="_CPPv3N2ac3outptEv"></span><span id="_CPPv2N2ac3outptEv"></span><span id="ac::out::pointer-operator"></span><span class="target" id="classac_1_1out_1aede66d42d73657454ee60bf64e45f65f"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">remove_reference_t</span></span><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4I0EN2ac3outE" title="ac::out::T"><span class="n"><span class="pre">T</span></span></a><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="k"><span class="pre">operator</span></span><span class="o"><span class="pre">-&gt;</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">noexcept</span></span><a class="headerlink" href="#_CPPv4N2ac3outptEv" title="Link to this definition">¶</a><br /></dt>
<dd><p>Provides direct access to the members of the wrapped type as <code class="docutils literal notranslate"><span class="pre">out-&gt;member</span></code>. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It would be better to support <code class="docutils literal notranslate"><span class="pre">out.member</span></code> syntax, but C++ doesn’t allow to overload <code class="docutils literal notranslate"><span class="pre">operator.</span></code> yet. </p>
</div>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4I0EN2ac3outaSER3outRR3Src">
<span id="_CPPv3I0EN2ac3outaSERR3Src"></span><span id="_CPPv2I0EN2ac3outaSERR3Src"></span><span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Src</span></span></span><span class="p"><span class="pre">&gt;</span></span><br /><span class="target" id="classac_1_1out_1ac8fef2c604482ce5158d506889e55995"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4I0EN2ac3outE" title="ac::out"><span class="n"><span class="pre">out</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="sig-name descname"><span class="k"><span class="pre">operator</span></span><span class="o"><span class="pre">=</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4I0EN2ac3outaSER3outRR3Src" title="ac::out::operator=::Src"><span class="n"><span class="pre">Src</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">src</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4I0EN2ac3outaSER3outRR3Src" title="Link to this definition">¶</a><br /></dt>
<dd><p>operator= enables assignment extension by overloading the <code class="docutils literal notranslate"><span class="pre">assign</span></code> free function accessible via ADL.</p>
<p>For example, if a third-party <code class="docutils literal notranslate"><span class="pre">Container</span></code> doesn’t support assignment from a range like <div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">dstContainer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">srcRange</span><span class="p">;</span>
</pre></div>
</div>
 we can still achieve a similar syntax <div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">ac</span><span class="o">::</span><span class="n">out</span><span class="p">{</span><span class="n">dstContainer</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">srcRange</span><span class="p">;</span>
</pre></div>
</div>
 by implementing the <code class="docutils literal notranslate"><span class="pre">assign</span></code> function in the same namespace as Container: <div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">InRange</span><span class="o">&gt;</span>
<span class="kt">void</span><span class="w"> </span><span class="n">assign</span><span class="p">(</span><span class="n">ac</span><span class="o">::</span><span class="n">out</span><span class="o">&lt;</span><span class="n">Container</span><span class="o">&amp;&gt;</span><span class="w"> </span><span class="n">dst</span><span class="p">,</span><span class="w"> </span><span class="n">InRange</span><span class="w"> </span><span class="k">const</span><span class="o">&amp;</span><span class="w"> </span><span class="n">src</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
</p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4I0EN2ac5inoutE">
<span id="_CPPv3I0EN2ac5inoutE"></span><span id="_CPPv2I0EN2ac5inoutE"></span><span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">T</span></span></span><span class="p"><span class="pre">&gt;</span></span><br /><span class="target" id="classac_1_1inout"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">inout</span></span></span><span class="w"> </span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="k"><span class="pre">public</span></span><span class="w"> </span><a class="reference internal" href="../string/char_classes.html#_CPPv42ac" title="ac"><span class="n"><span class="pre">ac</span></span></a><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4I0EN2ac3outE" title="ac::out"><span class="n"><span class="pre">out</span></span></a><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4I0EN2ac5inoutE" title="ac::inout::T"><span class="n"><span class="pre">T</span></span></a><span class="p"><span class="pre">&gt;</span></span><a class="headerlink" href="#_CPPv4I0EN2ac5inoutE" title="Link to this definition">¶</a><br /></dt>
<dd><p>Thin wrapper over a reference-like or a pointer-like type to specify an input-output function parameter.</p>
<p>It helps to simplify reasoning about the code behavior by making potential variable modifications clearly visible at both the function definition and all the call sites.</p>
<p>For example, in operations similar to sort it’s not immediately clear if we modify the argument in-place or return a new value: <div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">sort_range</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
</pre></div>
</div>
 Using <a class="reference internal" href="#classac_1_1inout"><span class="std std-ref">ac::inout</span></a> wrapper, we can provide two clearly differentiated overloads, with <code class="docutils literal notranslate"><span class="pre">[[nodiscard]]</span></code> as another measure to prevent incorrect use: <div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">Range</span><span class="o">&gt;</span>
<span class="kt">void</span><span class="w"> </span><span class="n">sort_range</span><span class="p">(</span><span class="n">ac</span><span class="o">::</span><span class="n">inout</span><span class="o">&lt;</span><span class="n">Range</span><span class="o">&amp;&gt;</span><span class="w"> </span><span class="n">range</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">Range</span><span class="o">&gt;</span>
<span class="p">[[</span><span class="n">nodiscard</span><span class="p">]]</span><span class="w"> </span><span class="n">Range</span><span class="w"> </span><span class="n">sort_range</span><span class="p">(</span><span class="n">Range</span><span class="w"> </span><span class="k">const</span><span class="o">&amp;</span><span class="w"> </span><span class="n">range</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>

<span class="n">sort_range</span><span class="p">(</span><span class="n">ac</span><span class="o">::</span><span class="n">inout</span><span class="p">{</span><span class="n">x</span><span class="p">});</span>
<span class="k">auto</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sort_range</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
</pre></div>
</div>
</p>
</dd></dl>

<p>Interface of <a class="reference internal" href="#_CPPv4I0EN2ac5inoutE" title="ac::inout"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ac::inout</span></code></a> basically repeats <a class="reference internal" href="#_CPPv4I0EN2ac3outE" title="ac::out"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ac::out</span></code></a>.</p>
<section id="detection-traits">
<h3>Detection traits<a class="headerlink" href="#detection-traits" title="Link to this heading">¶</a></h3>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4I0EN2ac8is_out_vE">
<span id="_CPPv3I0EN2ac8is_out_vE"></span><span id="_CPPv2I0EN2ac8is_out_vE"></span><span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">T</span></span></span><span class="p"><span class="pre">&gt;</span></span><br /><span class="target" id="namespaceac_1aea98923bae18dc09f5306bb346df1f50"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="../string/char_classes.html#_CPPv42ac" title="ac"><span class="n"><span class="pre">ac</span></span></a><span class="p"><span class="pre">::</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">is_out_v</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="n"><span class="pre">detail</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">is_out</span></span><span class="p"><span class="pre">&lt;</span></span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">remove_cvref_t</span></span><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4I0EN2ac8is_out_vE" title="ac::is_out_v::T"><span class="n"><span class="pre">T</span></span></a><span class="p"><span class="pre">&gt;</span></span><span class="p"><span class="pre">&gt;</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">value</span></span><a class="headerlink" href="#_CPPv4I0EN2ac8is_out_vE" title="Link to this definition">¶</a><br /></dt>
<dd><p>Checks whether T is a (possibly cvref-qualified) <a class="reference internal" href="#classac_1_1out"><span class="std std-ref">ac::out</span></a> wrapper. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the program adds specializations for <a class="reference internal" href="#namespaceac_1a7cea51402fe25bdcae41277ebcf1939e"><span class="std std-ref">ac::is_inout_v</span></a>, the behavior is undefined. </p>
</div>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4I0EN2ac10is_inout_vE">
<span id="_CPPv3I0EN2ac10is_inout_vE"></span><span id="_CPPv2I0EN2ac10is_inout_vE"></span><span class="k"><span class="pre">template</span></span><span class="p"><span class="pre">&lt;</span></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">T</span></span></span><span class="p"><span class="pre">&gt;</span></span><br /><span class="target" id="namespaceac_1a7cea51402fe25bdcae41277ebcf1939e"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="../string/char_classes.html#_CPPv42ac" title="ac"><span class="n"><span class="pre">ac</span></span></a><span class="p"><span class="pre">::</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">is_inout_v</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="n"><span class="pre">detail</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">is_inout</span></span><span class="p"><span class="pre">&lt;</span></span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">remove_cvref_t</span></span><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4I0EN2ac10is_inout_vE" title="ac::is_inout_v::T"><span class="n"><span class="pre">T</span></span></a><span class="p"><span class="pre">&gt;</span></span><span class="p"><span class="pre">&gt;</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">value</span></span><a class="headerlink" href="#_CPPv4I0EN2ac10is_inout_vE" title="Link to this definition">¶</a><br /></dt>
<dd><p>Checks whether T is a (possibly cvref-qualified) <a class="reference internal" href="#classac_1_1inout"><span class="std std-ref">ac::inout</span></a> wrapper. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the program adds specializations for <a class="reference internal" href="#namespaceac_1a7cea51402fe25bdcae41277ebcf1939e"><span class="std std-ref">ac::is_inout_v</span></a>, the behavior is undefined. </p>
</div>
</dd></dl>

<p><a class="reference external" href="https://github.com/AlCash07/ACTL/tree/master/include/actl/functional/parameter">Source code</a></p>
<p><a class="reference external" href="https://github.com/AlCash07/ACTL/tree/master/tests/functional/parameter/out_inout.cpp">Tests</a></p>
</section>
</section>
<section id="design">
<h2>Design<a class="headerlink" href="#design" title="Link to this heading">¶</a></h2>
<p>out/inout wrappers are designed to be as simple as possible,
so they don’t enforce any guarantees about the parameters
being actually written to.
There are more advanced designs available with such guarantees,
for example the one from this article about the
<a class="reference external" href="https://www.foonathan.net/2016/10/output-parameter">output parameter</a>.
But the added benefits don’t seem to be worth the extra complexity.
Especially considering that returning by value should be strongly preferred
over output parameters, so the latter are left to handle not single object,
but ranges and the like.</p>
<p>Google C++ style guide recognized the problem of output parameters,
but the proposed solution to use pointers was clearly misguided:</p>
<p>“In fact it is a very strong convention in Google code that
input arguments are values or const references
while output arguments are pointers.”</p>
<p>After many years this paragraph is finally removed from the guide.
But there’s no alternative provided, which we’re addressing here.</p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2022, Oleksandr Bacherikov.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 7.3.7.<br/>
    </p>
  </div>
</footer>
  </body>
</html>